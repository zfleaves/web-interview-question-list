# 5. Vite 依赖预构建是如何工作的？

**答案：**

### 依赖预构建简介

Vite 在开发服务器启动时，会自动预构建项目中的依赖，将 CommonJS/UMD 转换为 ESM，并提高依赖的加载速度。

### 工作原理

```
1. 扫描依赖
   ├── 扫描项目中的 import 语句
   └── 识别出所有第三方依赖

2. 预构建依赖
   ├── 使用 esbuild 将依赖转换为 ESM
   ├── 将多个依赖打包到一个 chunk 中
   └── 生成缓存的依赖文件

3. 使用预构建的依赖
   ├── 浏览器请求依赖时，返回预构建的文件
   └── 避免重复转换和打包
```

---