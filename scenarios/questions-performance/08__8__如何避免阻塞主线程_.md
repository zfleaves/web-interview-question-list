# 8. 如何避免阻塞主线程？

**答案：**

使用 Web Worker 和 requestIdleCallback 将耗时任务移出主线程。

```javascript
// ❌ 阻塞主线程
function heavyComputation() {
  for (let i = 0; i < 10000000; i++) {
    // 耗时计算
  }
}

// ✅ 使用 Web Worker
const worker = new Worker('worker.js');
worker.postMessage({ data: largeData });
worker.onmessage = (e) => {
  console.log('Result:', e.data);
};

// ✅ 使用 requestIdleCallback
function heavyTask() {
  requestIdleCallback(() => {
    // 在浏览器空闲时执行
    performComputation();
  });
}
```

---