# 30. qiankun 的最佳实践有哪些？

**答案：**

### 1. 项目结构

```
micro-frontend/
├── main-app/          # 主应用
│   ├── src/
│   │   ├── micro-apps/  # 子应用配置
│   │   └── shared/      # 共享资源
│   └── package.json
├── sub-app1/          # 子应用1
├── sub-app2/          # 子应用2
└── shared/            # 共享依赖
```

### 2. 代码规范

- **命名规范**：子应用使用统一的前缀（如 `@company/app1`）
- **版本管理**：使用语义化版本号
- **API 规范**：统一接口规范和数据格式

### 3. 样式规范

- 使用 CSS Modules 或 CSS-in-JS
- 采用 BEM 命名规范
- 使用 CSS 变量定义主题

### 4. 通信规范

- 优先使用 Global State 进行状态共享
- 避免直接操作全局变量
- 统一事件命名规范

### 5. 错误处理

- 子应用必须导出完整的生命周期函数
- 实现错误边界
- 添加全局错误监听

### 6. 性能优化

- 启用资源预加载
- 提取公共依赖
- 使用 CDN 加速

### 7. 监控告警

- 收集子应用性能指标
- 监控错误和异常
- 设置告警规则

### 8. 部署策略

- 独立部署子应用
- 使用 CI/CD 自动化部署
- 实现蓝绿部署或金丝雀发布

---