## 5. 策略模式是什么？

**答案：**

策略模式定义一系列算法，把它们一个个封装起来，并且使它们可相互替换。

### JavaScript 实现

```javascript
// 策略接口
const strategies = {
  add(a, b) {
    return a + b;
  },
  subtract(a, b) {
    return a - b;
  },
  multiply(a, b) {
    return a * b;
  },
  divide(a, b) {
    return b !== 0 ? a / b : 'Cannot divide by zero';
  }
};

// 上下文
class Calculator {
  constructor(strategy) {
    this.strategy = strategy;
  }

  setStrategy(strategy) {
    this.strategy = strategy;
  }

  execute(a, b) {
    return this.strategy(a, b);
  }
}

// 使用
const calculator = new Calculator(strategies.add);
console.log(calculator.execute(5, 3)); // 8

calculator.setStrategy(strategies.multiply);
console.log(calculator.execute(5, 3)); // 15
```

### 实际应用：表单验证

```javascript
const validators = {
  required(value) {
    return value.trim() !== '';
  },
  minLength(value, length) {
    return value.length >= length;
  },
  isEmail(value) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
  }
};

class FormValidator {
  constructor() {
    this.validators = [];
  }

  addValidator(validator, message) {
    this.validators.push({ validator, message });
  }

  validate(value) {
    for (const { validator, message } of this.validators) {
      if (!validator(value)) {
        return message;
      }
    }
    return null;
  }
}

// 使用
const emailValidator = new FormValidator();
emailValidator.addValidator(validators.required, 'Email is required');
emailValidator.addValidator(validators.isEmail, 'Invalid email format');

console.log(emailValidator.validate('')); // Email is required
console.log(emailValidator.validate('invalid')); // Invalid email format
console.log(emailValidator.validate('test@example.com')); // null
```

### 应用场景

1. **表单验证**
2. **支付方式**（支付宝、微信、银行卡）
3. **排序算法**（冒泡排序、快速排序、归并排序）
4. **压缩算法**（ZIP、RAR、7Z）

---