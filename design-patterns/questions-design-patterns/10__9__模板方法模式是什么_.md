## 9. 模板方法模式是什么？

**答案：**

模板方法模式定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。

### JavaScript 实现

```javascript
class AbstractClass {
  templateMethod() {
    this.step1();
    this.step2();
    this.step3();
  }

  step1() {
    throw new Error('This method should be overridden');
  }

  step2() {
    throw new Error('This method should be overridden');
  }

  step3() {
    throw new Error('This method should be overridden');
  }
}

class ConcreteClass extends AbstractClass {
  step1() {
    console.log('ConcreteClass: Step 1');
  }

  step2() {
    console.log('ConcreteClass: Step 2');
  }

  step3() {
    console.log('ConcreteClass: Step 3');
  }
}

// 使用
const concrete = new ConcreteClass();
concrete.templateMethod();
// ConcreteClass: Step 1
// ConcreteClass: Step 2
// ConcreteClass: Step 3
```

### 实际应用：数据导出

```javascript
class DataExporter {
  export(data) {
    this.validate(data);
    const formattedData = this.format(data);
    this.save(formattedData);
  }

  validate(data) {
    if (!data || data.length === 0) {
      throw new Error('Data is empty');
    }
  }

  format(data) {
    throw new Error('This method should be overridden');
  }

  save(data) {
    throw new Error('This method should be overridden');
  }
}

class CSVExporter extends DataExporter {
  format(data) {
    return data.map(row => row.join(',')).join('\n');
  }

  save(data) {
    console.log(`Saving CSV:\n${data}`);
  }
}

class JSONExporter extends DataExporter {
  format(data) {
    return JSON.stringify(data, null, 2);
  }

  save(data) {
    console.log(`Saving JSON:\n${data}`);
  }
}

// 使用
const csvExporter = new CSVExporter();
const jsonExporter = new JSONExporter();

const data = [
  ['name', 'age'],
  ['John', 30],
  ['Jane', 25]
];

csvExporter.export(data);
jsonExporter.export(data);
```

### 应用场景

1. **算法骨架**
2. **数据处理流程**
3. **业务流程模板**

---