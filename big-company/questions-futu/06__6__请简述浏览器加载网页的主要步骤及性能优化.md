# 6. 请简述浏览器加载网页的主要步骤及性能优化

**答案：**

**浏览器加载网页的主要步骤：**

```
1. DNS 解析
2. TCP 连接
3. HTTP 请求
4. 服务器响应
5. 渲染树构建
6. 布局
7. 绘制
8. 合成
```

**性能优化方案：**

**1. DNS 解析优化**

```javascript
// DNS 预解析
<link rel="dns-prefetch" href="https://api.example.com">

// DNS 预连接
<link rel="preconnect" href="https://api.example.com">
```

**2. 资源加载优化**

```javascript
// 预加载关键资源
<link rel="preload" href="critical.css" as="style">
<link rel="preload" href="main.js" as="script">

// 预获取可能用到的资源
<link rel="prefetch" href="next-page.js">

// 懒加载非关键资源
<img src="placeholder.jpg" data-src="real-image.jpg" loading="lazy">
```

**3. 代码分割**

```javascript
// 动态导入
const Home = lazy(() => import('./Home'));
const About = lazy(() => import('./About'));

// Webpack 配置
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all',
        },
      },
    },
  },
};
```

**4. 缓存优化**

```javascript
// 强制缓存
Cache-Control: max-age=31536000

// 协商缓存
ETag: "abc123"
Last-Modified: Wed, 21 Oct 2015 07:28:00 GMT
```

**5. 渲染优化**

```javascript
// 避免布局抖动
const element = document.getElementById('element');
element.style.width = '100px';
element.style.height = '100px';

// 批量 DOM 操作
const fragment = document.createDocumentFragment();
items.forEach(item => {
  const node = document.createElement('div');
  node.textContent = item.text;
  fragment.appendChild(node);
});
document.body.appendChild(fragment);

// 使用 CSS3 动画
.element {
  transition: transform 0.3s;
  will-change: transform;
}
```

**富途特色考点：**
- 富途高频考察性能优化的全链路思维
- 结合金融业务场景说明优化方案
- 考察对性能监控工具的使用经验

---
