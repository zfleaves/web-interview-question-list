# 9. vue2/3 响应式原理

**答案：**

**Vue 2：Object.defineProperty**

```javascript
// Vue 2 响应式原理
function defineReactive(obj, key, val) {
  const dep = new Dep();
  
  Object.defineProperty(obj, key, {
    get() {
      dep.depend();
      return val;
    },
    set(newVal) {
      if (newVal !== val) {
        val = newVal;
        dep.notify();
      }
    }
  });
}

class Dep {
  constructor() {
    this.subs = [];
  }
  
  depend() {
    if (Dep.target) {
      this.subs.push(Dep.target);
    }
  }
  
  notify() {
    this.subs.forEach(sub => sub.update());
  }
}
```

**Vue 3：Proxy**

```javascript
// Vue 3 响应式原理
function reactive(obj) {
  return new Proxy(obj, {
    get(target, key) {
      track(target, key);
      return target[key];
    },
    set(target, key, value) {
      target[key] = value;
      trigger(target, key);
      return true;
    }
  });
}

function track(target, key) {
  console.log(`Track: ${key} =`, target[key]);
}

function trigger(target, key) {
  console.log(`Trigger: ${key} =`, target[key]);
}

const data = reactive({
  count: 0
});

data.count = 1; // Trigger
console.log(data.count); // Track count = 1
```

**Vue 3 响应式优势：**

1. **数组监听**：可以监听数组索引和长度的变化
2. **属性删除**：可以监听属性删除
3. **Map/Set 监听**：可以监听 Map 和 Set 的增删改
4. **性能更好**：Proxy 比 Object.defineProperty 性能更好

**高途特色考点：**
- 高频考察 Vue 2/3 响应式系统差异
- 结合实际项目说明响应式系统的应用
- 考察对 Proxy 新特性的理解

---

## 总结

高途面试题重点掌握：

### 前端基础
1. **小程序开发**：uniapp 多端打包、条件编译
2. **浏览器安全**：跨域问题及解决方案
3. **框架原理**：Vue 响应式系统、虚拟 DOM、Diff 算法
4. **CSS 基础**：权重计算、盒模型、选择器优先级
5. **JavaScript 核心**：this 指向、原型链、箭头函数、class 语法

### 算法题
1. **字符串处理**：查找最长连续重复字符串

### 场景题
1. **小程序开发**：多端打包、条件编译
2. **跨域处理**：Vite proxy 配置、Nginx 反向代理
3. **样式设计**：盒模型、CSS 权重、样式优先级

**面试准备建议：**
1. 深入理解小程序打包原理
2. 掌握常见算法和数据结构
3. 熟悉 CSS 基础和样式优先级
4. 注重代码质量和可维护性
5. 结合教育业务场景说明解决方案
