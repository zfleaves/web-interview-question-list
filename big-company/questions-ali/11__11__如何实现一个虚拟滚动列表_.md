# 11. 如何实现一个虚拟滚动列表？

**答案：**

```javascript
class VirtualList {
  constructor(container, items, itemHeight = 50) {
    this.container = container;
    this.items = items;
    this.itemHeight = itemHeight;
    this.visibleCount = Math.ceil(container.clientHeight / itemHeight);
    this.renderChunk(0);
    
    container.addEventListener('scroll', () => {
      const start = Math.floor(container.scrollTop / itemHeight);
      this.renderChunk(start);
    });
  }
  
  renderChunk(start) {
    const end = start + this.visibleCount;
    const fragment = document.createDocumentFragment();
    
    this.items.slice(start, end).forEach((item, i) => {
      const node = this.renderItem(item);
      node.style.position = 'absolute';
      node.style.top = `${(start + i) * this.itemHeight}px`;
      node.style.height = `${this.itemHeight}px`;
      fragment.appendChild(node);
    });
    
    this.container.innerHTML = '';
    this.container.appendChild(fragment);
  }
  
  renderItem(item) {
    const div = document.createElement('div');
    div.textContent = item.text;
    return div;
  }
}

// 使用
const container = document.getElementById('container');
const items = Array.from({ length: 10000 }, (_, i) => ({
  id: i,
  text: `Item ${i}`
}));

new VirtualList(container, items);
```

**阿里特色考点：**
- 阿里高频考察虚拟滚动的实现原理
- 结合电商商品列表说明优化效果
- 考察对大数据量渲染性能优化的理解

---
