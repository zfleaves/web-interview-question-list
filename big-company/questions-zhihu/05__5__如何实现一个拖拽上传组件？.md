# 5. 如何实现一个拖拽上传组件？

**答案：**

```javascript
class DragUpload extends React.Component {
  state = {
    isDragging: false,
    files: []
  };
  
  handleDragEnter = (e) => {
    e.preventDefault();
    e.stopPropagation();
    this.setState({ isDragging: true });
  };
  
  handleDragLeave = (e) => {
    e.preventDefault();
    e.stopPropagation();
    this.setState({ isDragging: false });
  };
  
  handleDragOver = (e) => {
    e.preventDefault();
    e.stopPropagation();
  };
  
  handleDrop = (e) => {
    e.preventDefault();
    e.stopPropagation();
    this.setState({ isDragging: false });
    
    const files = Array.from(e.dataTransfer.files);
    this.handleFiles(files);
  };
  
  handleFiles = (files) => {
    this.setState(prevState => ({
      files: [...prevState.files, ...files]
    }));
    
    // 上传文件
    files.forEach(file => this.uploadFile(file));
  };
  
  uploadFile = async (file) => {
    const formData = new FormData();
    formData.append('file', file);
    
    try {
      const response = await fetch('/api/upload', {
        method: 'POST',
        body: formData,
      });
      const data = await response.json();
      console.log('上传成功:', data);
    } catch (error) {
      console.error('上传失败:', error);
    }
  };
  
  render() {
    const { isDragging, files } = this.state;
    
    return (
      <div>
        <div
          onDragEnter={this.handleDragEnter}
          onDragLeave={this.handleDragLeave}
          onDragOver={this.handleDragOver}
          onDrop={this.handleDrop}
          style={{
            border: `2px dashed ${isDragging ? '#1890ff' : '#d9d9d9'}`,
            padding: '40px',
            textAlign: 'center',
            backgroundColor: isDragging ? '#f0f9ff' : '#fafafa'
          }}
        >
          {isDragging ? '释放文件以上传' : '拖拽文件到此处'}
        </div>
        
        <ul>
          {files.map((file, index) => (
            <li key={index}>{file.name}</li>
          ))}
        </ul>
      </div>
    );
  }
}
```

---
