## 9. 如何实现防抖和节流？

**答案：**

### 防抖（Debounce）

```javascript
function debounce(func, delay) {
  let timer = null;
  
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => {
      func.apply(this, args);
    }, delay);
  };
}

// 使用
const debouncedSearch = debounce((keyword) => {
  console.log('Search:', keyword);
}, 300);

debouncedSearch('a');
debouncedSearch('ab');
debouncedSearch('abc'); // 只执行最后一次
```

### 节流（Throttle）

```javascript
function throttle(func, delay) {
  let timer = null;
  let lastTime = 0;
  
  return function(...args) {
    const now = Date.now();
    
    if (now - lastTime >= delay) {
      func.apply(this, args);
      lastTime = now;
    } else if (!timer) {
      timer = setTimeout(() => {
        func.apply(this, args);
        lastTime = Date.now();
        timer = null;
      }, delay - (now - lastTime));
    }
  };
}

// 使用
const throttledScroll = throttle(() => {
  console.log('Scroll');
}, 300);

window.addEventListener('scroll', throttledScroll);
```

### 应用场景

**防抖：**
- 搜索框输入
- 窗口大小调整
- 表单验证

**节流：**
- 滚动事件
- 鼠标移动
- 按钮点击

---